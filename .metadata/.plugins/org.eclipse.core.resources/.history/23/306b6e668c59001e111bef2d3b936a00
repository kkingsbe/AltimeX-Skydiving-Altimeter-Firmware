/*
 * altimex_serial.c
 *
 *  Created on: Sep 20, 2023
 *      Author: kking
 */

#include <usb.h>

void STM_USB::init(UART_HandleTypeDef* _uart)
{
	STM_USB::uart = uart;
}

void STM_USB::printf(float data)
{
	uint8_t charData[64] = {'\0'};
	sprintf(charData, "%f", data);
	size_t len = strlen(charData);
	STM_USB::println(charData, len);
}

void STM_USB::printd(double data)
{
	uint8_t charData[64] = {'\0'};
	sprintf(charData, "%f", data);
	size_t len = strlen(charData);
	STM_USB::println(charData, len);
}

void STM_USB::print(uint8_t* data, size_t len)
{
	HAL_UART_Transmit(STM_USB::uart, data, len, 100);
}

void STM_USB::println(uint8_t* data, size_t len)
{
	STM_USB::print(data, len);

	uint8_t newline[2] = ["\r", "\n"];
	STM_USB::print(newline, 2);
}
